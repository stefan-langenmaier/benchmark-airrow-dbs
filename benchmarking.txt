// shell access

java -cp bin/h2-1.4.199.jar org.h2.tools.Shell

// load gis extension

CREATE ALIAS IF NOT EXISTS H2GIS_SPATIAL FOR "org.h2gis.functions.factory.H2GISFunctions.load";
CALL H2GIS_SPATIAL();


// create database

CREATE SCHEMA geobench;

// create table

CREATE TABLE session(id UUID PRIMARY KEY, location GEOMETRY, status VARCHAR(255));

// create spatial index

CREATE SPATIAL INDEX location_index ON session(location);

// insert point

INSERT INTO SESSION (id, location, status) VALUES (RANDOM_UUID(), ST_GeomFromText('POINT(7 52)', 4326), 'ðŸŽ¯')

// update point

UPDATE SESSION SET location =  ST_GeomFromText('POINT(${latitude} ${longitude})', 4326), status = 'x' WHERE id = '${customUuid}';

// search point

SELECT * FROM Session ORDER BY ST_DistanceSphere(location, ST_GeomFromText('POINT(${latitude} ${longitude})', 4326)) DESC LIMIT 10;




docker run --name postgres -e POSTGRES_PASSWORD=mysecretpassword --rm -p 5432:5432 -d postgis/postgis
